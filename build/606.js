"use strict";(globalThis.webpackChunkultimate_spin_wheel=globalThis.webpackChunkultimate_spin_wheel||[]).push([[606],{571:(e,t,l)=>{l.d(t,{A:()=>r});var a=l(609),o=l(723);const r=({title:e,desc:t})=>(0,a.createElement)("div",{className:"relative bg-gradient-to-r from-indigo-800 to-purple-600 dark:from-gray-900 dark:to-gray-700 bg-clip-border mx-4 rounded-xl overflow-hidden  text-white shadow-purple-500/40 dark:shadow-gray-900/40  shadow-lg -mt-12 mb-8 p-3 lg:p-6"},(0,a.createElement)("div",{className:"flex w-full items-center justify-between"},(0,a.createElement)("div",null,(0,a.createElement)("h6",{className:"block antialiased tracking-normal font-sans text-base font-semibold leading-relaxed  text-white mt-0 mb-1"},(0,o.__)(e,"ultimate-spin-wheel")),(0,a.createElement)("div",{className:"block antialiased font-sans text-md font-normal  dark:text-gray-300"},(0,o.__)(t,"ultimate-spin-wheel")))))},606:(e,t,l)=>{l.r(t),l.d(t,{default:()=>I});var a=l(609),o=l.n(a),r=l(723),n=l(143),s=(l(582),l(571));const i=["#277162","#277162","#277162","#277162","#277162"],c={win:{bgColor:"from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100",badgeColor:"from-green-500 to-emerald-500",focusColor:"focus:ring-green-500",dotColor:"bg-green-500 animate-pulse"},lost:{bgColor:"from-red-50 to-pink-50 hover:from-red-100 hover:to-pink-100",badgeColor:"from-red-500 to-pink-500",focusColor:"focus:ring-red-500",dotColor:"bg-red-500"}},p=({type:e,label:t})=>{const l=c[e];return(0,a.createElement)("div",{className:"flex items-center space-x-2"},(0,a.createElement)("div",{className:`w-2 h-2 ${l.dotColor} rounded-full`}),(0,a.createElement)("span",{className:`inline-block px-2 py-1 bg-gradient-to-r ${l.badgeColor} text-white text-xs font-${"win"===e?"bold":"medium"} rounded-full shadow-sm`},t))},u=({type:e="text",value:t="",onChange:l,placeholder:o,className:r="",focusColor:n="focus:ring-green-500",...s})=>(0,a.createElement)("input",{type:e,value:t,onChange:l,className:`w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-2 ${n} focus:border-transparent transition-all duration-200 bg-white shadow-sm ${r}`,placeholder:o,...s}),m=({value:e,onChange:t,title:l})=>(0,a.createElement)("input",{type:"color",value:e,onChange:t,className:"w-12 h-12 cursor-pointer",title:l}),d=({onClick:e})=>(0,a.createElement)("button",{onClick:e,className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-2.5 py-2.5 text-center group",title:"Remove this coupon"},(0,a.createElement)("svg",{className:"w-5 h-5 transition-transform duration-200 group-hover:scale-110",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,a.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),g=({text:e})=>(0,a.createElement)("div",{className:"flex items-center justify-center h-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200"},(0,a.createElement)("span",{className:"text-gray-400 italic text-sm"},e)),b=({icon:e,title:t,value:l,isWarning:o=!1,warningText:r=""})=>(0,a.createElement)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-100"},(0,a.createElement)("div",{className:"flex items-center space-x-2 mb-2"},(0,a.createElement)("span",{className:`w-2 h-2 ${e} rounded-full`}),(0,a.createElement)("span",{className:"font-semibold text-gray-700"},t)),(0,a.createElement)("div",{className:"flex items-center space-x-2"},(0,a.createElement)("span",{className:"text-2xl font-bold "+(o?"text-red-600":"text-blue-600")},l),o&&r&&(0,a.createElement)("span",{className:"text-red-500 text-xs bg-red-100 px-2 py-1 rounded-full"},r))),h=({coupons:e=[],onAdd:t,onRemove:l,onUpdate:r})=>{const n=(0,a.useMemo)(()=>e.map((t,l)=>({...t,lost:t.lost||{label:"",color:e[l]?.lost?.color||i[l%i.length]}})),[e]),s=(0,a.useMemo)(()=>{const e=n.reduce((e,t)=>e+(parseInt(t?.probability)||0),0);return{totalWinProbability:e,lostProbability:Math.max(0,100-e),averageWinRate:n.length>0?Math.round(e/n.length):0,isOverLimit:e>100}},[n]),h=(0,a.useCallback)((e,t,l)=>{const a={...n[e]};if(t.startsWith("lost.")){const e=t.split(".")[1];a.lost={...a.lost,[e]:l||""}}else a[t]=l||"";r(e,a)},[n,r]),f=(0,a.useCallback)((e,t,l)=>{const a={...n[e]};a.lost={...a.lost,[t]:l||""},r(e,a)},[n,r]);return(0,a.createElement)("div",null,(0,a.createElement)("div",{className:"flex items-center justify-between mb-8 pb-4 border-b border-gray-200"},(0,a.createElement)("div",null,(0,a.createElement)("h3",{className:"text-2xl font-bold text-gray-800 mb-2"},"ðŸŽ¡ Coupons List"),(0,a.createElement)("p",{className:"text-gray-600 text-sm"},"Configure your coupon probabilities and appearance"))),(0,a.createElement)("div",{className:"overflow-x-auto rounded-lg shadow-sm"},(0,a.createElement)("table",{className:"table-auto w-full border-collapse bg-white"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",{className:"bg-gradient-to-r from-indigo-800 to-purple-600 text-white shadow-lg"},(0,a.createElement)("th",{className:"px-6 py-4 text-left font-semibold text-sm uppercase tracking-wider border-r border-blue-500"},(0,a.createElement)("div",{className:"flex items-center space-x-2"},(0,a.createElement)("span",{className:"w-2 h-2 bg-white rounded-full"}),(0,a.createElement)("span",null,"Type"))),(0,a.createElement)("th",{className:"px-6 py-4 text-left font-semibold text-sm uppercase tracking-wider border-r border-blue-500"},"Label"),(0,a.createElement)("th",{className:"px-6 py-4 text-left font-semibold text-sm uppercase tracking-wider border-r border-blue-500"},"Code/Description"),(0,a.createElement)("th",{className:"px-6 py-4 text-left font-semibold text-sm uppercase tracking-wider border-r border-blue-500"},"Probability (%)"),(0,a.createElement)("th",{className:"px-6 py-4 text-left font-semibold text-sm uppercase tracking-wider border-r border-blue-500"},"Color"),(0,a.createElement)("th",{className:"px-6 py-4 text-center font-semibold text-sm uppercase tracking-wider"},"Actions"))),(0,a.createElement)("tbody",null,n.map((e,t)=>(0,a.createElement)(o().Fragment,{key:`coupon-${t}`},(0,a.createElement)("tr",{className:`bg-gradient-to-r ${c.win.bgColor} transition-all duration-200`},(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(p,{type:"win",label:"WIN"})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(u,{value:e?.label||"",onChange:e=>h(t,"label",e.target.value),placeholder:"ðŸ·ï¸ Win Label",focusColor:c.win.focusColor})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(u,{value:e?.code||"",onChange:e=>h(t,"code",e.target.value),placeholder:"ðŸ’³ Coupon Code",className:"font-mono",focusColor:c.win.focusColor})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)("div",{className:"relative"},(0,a.createElement)(u,{type:"number",value:e?.probability||"",onChange:e=>h(t,"probability",e.target.value),placeholder:"Win %",className:"pr-8",focusColor:c.win.focusColor,min:"0",max:"100"}),(0,a.createElement)("span",{className:"absolute right-3 top-3 text-gray-400 text-sm"},"%"))),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(m,{value:e?.color||"#4ECDC4",onChange:e=>h(t,"color",e.target.value),title:"Choose win color"})),(0,a.createElement)("td",{className:"px-6 py-4 text-center"},(0,a.createElement)(d,{onClick:()=>l(t)}))),(0,a.createElement)("tr",{className:`bg-gradient-to-r ${c.lost.bgColor} transition-all duration-200`},(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(p,{type:"lost",label:"LOST"})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(u,{value:e?.lost?.label||"",onChange:e=>f(t,"label",e.target.value),placeholder:"",focusColor:c.lost.focusColor})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(g,{text:"ðŸš« No coupon code for lost"})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(g,{text:"N/A"})),(0,a.createElement)("td",{className:"px-6 py-4 border-r border-gray-100"},(0,a.createElement)(m,{value:e?.lost?.color||i[t%i.length],onChange:e=>f(t,"color",e.target.value),title:"Choose lost color"})),(0,a.createElement)("td",{className:"px-6 py-4 text-center"})),t<n.length-1&&(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:"6",className:"h-4 bg-gradient-to-r from-gray-50 via-white to-gray-50 border-b border-gray-100"},(0,a.createElement)("div",{className:"w-full h-full flex items-center justify-center"},(0,a.createElement)("div",{className:"w-32 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}))))))))),(0,a.createElement)("div",{className:"mt-6"},(0,a.createElement)("button",{onClick:t,className:"px-6 py-3 bg-blue-500 text-white rounded shadow hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition-colors"},"Add New Coupon")),(0,a.createElement)("div",{className:"mt-8"},(0,a.createElement)("div",{className:"mb-6"},(0,a.createElement)("h4",{className:"text-xl font-bold text-gray-800"},"Configuration Summary"),(0,a.createElement)("p",{className:"text-gray-600 text-sm"},'In a spin wheel, the total of all win probabilities should equal 100% or less. Any remaining percentage becomes the "lost" probability. Each coupon competes for its share of the 100% total.')),(0,a.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-sm"},(0,a.createElement)(b,{icon:"bg-blue-500",title:"Total Coupons",value:n.length}),(0,a.createElement)(b,{icon:"bg-green-500",title:"Total Win Probability",value:`${s.totalWinProbability}%`,isWarning:s.isOverLimit,warningText:s.isOverLimit?"âš ï¸ Over 100%":""}),(0,a.createElement)(b,{icon:"bg-red-500",title:"Lost Probability",value:`${s.lostProbability}%`}),(0,a.createElement)(b,{icon:"bg-purple-500",title:"Average Win Rate",value:`${s.averageWinRate}%`})),s.isOverLimit&&(0,a.createElement)("div",{className:"mt-6 p-4 bg-gradient-to-r from-red-50 to-orange-50 border-l-4 border-red-500 rounded-lg shadow-sm"},(0,a.createElement)("div",{className:"flex items-start space-x-3"},(0,a.createElement)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"},(0,a.createElement)("span",{className:"text-white text-xs"},"âš ï¸")),(0,a.createElement)("div",null,(0,a.createElement)("h5",{className:"font-semibold text-red-800 mb-1"},"Probability Warning"),(0,a.createElement)("p",{className:"text-red-700 text-sm"},"Total win probabilities exceed 100%. This configuration may cause unpredictable results. Consider reducing individual probabilities so they sum to 100% or less."))))))};var f=l(427),y=l(682),x=l.n(y);const _=({value:e,onChange:t,title:l})=>(0,a.createElement)("input",{type:"color",value:e,onChange:t,className:"w-12 h-12 cursor-pointer",title:l}),v=({segments:e,customDesign:t,setCustomDesign:l})=>{const[o,n]=(0,a.useState)("wheel");console.log("customDesign:",t);const s=(()=>{if("string"==typeof t)try{return JSON.parse(t)}catch(e){return console.error("Error parsing customDesign JSON:",e),{}}return t||{}})();(0,a.useEffect)(()=>((()=>{const e=document.getElementById("ultimate-spin-wheel-preview-styles");e&&e.remove();const t=document.createElement("style");t.id="ultimate-spin-wheel-preview-styles",t.type="text/css";const l=(a=s,`\n      /* Spin Wheel Custom Styles */\n      #ultimate-spin-wheel-preview {\n        --panel-bg-color: ${a.viewPanel?.backgroundColor||"#16a085"};\n        --spin-btn-color: ${a.spinButton?.color||"#fff"};\n        --spin-btn-bg: ${a.spinButton?.backgroundColor||"#16a085"};\n        --spin-btn-hover: ${a.spinButton?.backgroundColorColorHover||"#139cb2"};\n        --spin-btn-font-size: ${a.spinButton?.fontSize||"16px"};\n        --form-title-color: ${a.formTitle?.color||"#fff"};\n        --form-title-size: ${a.formTitle?.fontSize||"24px"};\n        --form-title-weight: ${a.formTitle?.fontWeight||"normal"};\n        --form-submit-color: ${a.formSubmitButton?.color||"#0a0a0a"};\n        --form-submit-bg: ${a.formSubmitButton?.backgroundColor||"#fff"};\n        --form-submit-hover: ${a.formSubmitButton?.hoverColor||"#f0f0f0"};\n        --form-submit-size: ${a.formSubmitButton?.fontSize||"16px"};\n        --form-submit-radius: ${a.formSubmitButton?.borderRadius||5}px;\n        --input-border: ${a.formInputs?.borderColor||"#ccc"};\n        --input-focus: ${a.formInputs?.focusColor||"#16a085"};\n        --privacy-color: ${a.privacyText?.color||"#fff"};\n        --privacy-size: ${a.privacyText?.fontSize||"12px"};\n        --prize-title-color: ${a.prizeWonTitle?.color||"#fff"};\n        --prize-title-size: ${a.prizeWonTitle?.fontSize||"24px"};\n        --prize-msg-color: ${a.prizeWonMsg?.color||"#fff"};\n        --prize-msg-size: ${a.prizeWonMsg?.fontSize||"28px"};\n        --lost-title-color: ${a.prizeLostTitle?.color||"#fff"};\n        --lost-title-size: ${a.prizeLostTitle?.fontSize||"24px"};\n        --coupon-btn-color: ${a.couponButton?.color||"#fff"};\n        --coupon-btn-bg: ${a.couponButton?.backgroundColor||"#16a085"};\n        --coupon-btn-hover: ${a.couponButton?.hoverColor||"#139cb2"};\n        --coupon-btn-radius: ${a.couponButton?.borderRadius||5}px;\n        --wheel-lost-color: ${a.wheel?.lostColor||"#ccc"};\n        --wheel-border-color: ${a.wheel?.borderColor||"#fff"};\n        --wheel-border-width: ${a.wheel?.borderWidth||12}px;\n      }\n    `);var a;t.styleSheet?t.styleSheet.cssText=l:t.appendChild(document.createTextNode(l)),document.head.appendChild(t)})(),()=>{const e=document.getElementById("ultimate-spin-wheel-preview-styles");e&&e.remove()}),[s]);const i=(e,a,o)=>{const r={...s,[e]:{...s[e],[a]:o}};l("string"==typeof t?JSON.stringify(r):r)};return(0,a.createElement)("div",{className:"ultimate-spin-wheel"},(0,a.createElement)("div",{className:"flex gap-8 p-4"},(0,a.createElement)("div",{className:"min-w-[400px]"},(0,a.createElement)("div",{className:"mb-6"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},(0,r.__)("General Settings","ultimate-spin-wheel")),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Panel Background"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Background Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose panel background color",value:s.viewPanel?.backgroundColor||"#16a085",onChange:e=>i("viewPanel","backgroundColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Border Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose wheel border color",value:s.wheel?.borderColor||"#fff",onChange:e=>i("wheel","borderColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Border Width","ultimate-spin-wheel")),(0,a.createElement)(f.RangeControl,{value:s.wheel?.borderWidth||12,onChange:e=>i("wheel","borderWidth",e),min:0,max:40,help:(0,r.__)("Border width in pixels","ultimate-spin-wheel")}))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Privacy Text"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Privacy Text","ultimate-spin-wheel"),value:s.privacyText?.text||"Privacy & Policy",onChange:e=>i("privacyText","text",e),help:(0,r.__)("Privacy policy text.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose privacy text color",value:s.privacyText?.color||"#fff",onChange:e=>i("privacyText","color",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Font Size","ultimate-spin-wheel"),value:s.privacyText?.fontSize||"12px",onChange:e=>i("privacyText","fontSize",e),help:(0,r.__)("Font size for privacy text (e.g., 12px, 0.8em).","ultimate-spin-wheel")}),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Privacy Link URL","ultimate-spin-wheel"),value:s.privacyText?.url||"#",onChange:e=>i("privacyText","url",e),help:(0,r.__)("URL for privacy policy link.","ultimate-spin-wheel")}))),(0,a.createElement)("div",{className:"mb-6"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},(0,r.__)("Wheel Settings","ultimate-spin-wheel")),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Spin Button (Center)"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Button Text","ultimate-spin-wheel"),value:s.spinButton?.text||"GO!",onChange:e=>i("spinButton","text",e),help:(0,r.__)("Text displayed on the center spin button.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose text color",value:s.spinButton?.color||"#fff",onChange:e=>i("spinButton","color",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Background Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose background color",value:s.spinButton?.backgroundColor||"#16a085",onChange:e=>i("spinButton","backgroundColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Hover Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose hover color",value:s.spinButton?.backgroundColorColorHover||"#139cb2",onChange:e=>i("spinButton","backgroundColorColorHover",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Font Size","ultimate-spin-wheel"),value:s.spinButton?.fontSize||"16px",onChange:e=>i("spinButton","fontSize",e),help:(0,r.__)("Font size for button text (e.g., 16px, 1em).","ultimate-spin-wheel")}))),(0,a.createElement)("div",{className:"mb-6"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},(0,r.__)("Form Settings","ultimate-spin-wheel")),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Form Title"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Title Text","ultimate-spin-wheel"),value:s.formTitle?.text||"Let's try luck!",onChange:e=>i("formTitle","text",e),help:(0,r.__)("Main title text displayed on the form.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose title color",value:s.formTitle?.color||"#fff",onChange:e=>i("formTitle","color",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Font Size","ultimate-spin-wheel"),value:s.formTitle?.fontSize||"24px",onChange:e=>i("formTitle","fontSize",e),help:(0,r.__)("Font size for the title (e.g., 24px, 1.5em).","ultimate-spin-wheel")}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Font Weight","ultimate-spin-wheel"),value:s.formTitle?.fontWeight||"normal",options:[{label:"Normal",value:"normal"},{label:"Bold",value:"bold"},{label:"Light",value:"300"},{label:"Semi Bold",value:"600"},{label:"Extra Bold",value:"800"}],onChange:e=>i("formTitle","fontWeight",e)})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Submit Button"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Button Text","ultimate-spin-wheel"),value:s.formSubmitButton?.text||"Spin The Wheel",onChange:e=>i("formSubmitButton","text",e),help:(0,r.__)("Text for the submit button.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose submit button text color",value:s.formSubmitButton?.color||"#0a0a0a",onChange:e=>i("formSubmitButton","color",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Background Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose submit button background color",value:s.formSubmitButton?.backgroundColor||"#fff",onChange:e=>i("formSubmitButton","backgroundColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Hover Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose submit button hover color",value:s.formSubmitButton?.hoverColor||"#f0f0f0",onChange:e=>i("formSubmitButton","hoverColor",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Font Size","ultimate-spin-wheel"),value:s.formSubmitButton?.fontSize||"16px",onChange:e=>i("formSubmitButton","fontSize",e),help:(0,r.__)("Font size for button text (e.g., 16px, 1em).","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Border Radius","ultimate-spin-wheel")),(0,a.createElement)(f.RangeControl,{value:s.formSubmitButton?.borderRadius||5,onChange:e=>i("formSubmitButton","borderRadius",e),min:0,max:50,help:(0,r.__)("Button border radius in pixels","ultimate-spin-wheel")}))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Input Fields"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Name Placeholder","ultimate-spin-wheel"),value:s.formInputs?.namePlaceholder||"Enter your name",onChange:e=>i("formInputs","namePlaceholder",e)}),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Email Placeholder","ultimate-spin-wheel"),value:s.formInputs?.emailPlaceholder||"Enter your email",onChange:e=>i("formInputs","emailPlaceholder",e)}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Border Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose input border color",value:s.formInputs?.borderColor||"#ccc",onChange:e=>i("formInputs","borderColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Focus Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose input focus color",value:s.formInputs?.focusColor||"#16a085",onChange:e=>i("formInputs","focusColor",e.target.value)})))),(0,a.createElement)("div",{className:"mb-6"},(0,a.createElement)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 border-b pb-2"},(0,r.__)("Result Panels","ultimate-spin-wheel")),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Prize Won Panel"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Title Text","ultimate-spin-wheel"),value:s.prizeWonTitle?.text||"Congratulations!",onChange:e=>i("prizeWonTitle","text",e),help:(0,r.__)("Title shown when user wins.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Title Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose title color",value:s.prizeWonTitle?.color||"#fff",onChange:e=>i("prizeWonTitle","color",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Title Font Size","ultimate-spin-wheel"),value:s.prizeWonTitle?.fontSize||"24px",onChange:e=>i("prizeWonTitle","fontSize",e)}),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Prize Message","ultimate-spin-wheel"),value:s.prizeWonMsg?.text||"You won a {{discount_label}} discount!",onChange:e=>i("prizeWonMsg","text",e),help:(0,r.__)("Message shown when user wins. Use {{discount_label}} for dynamic content.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Message Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose prize message color",value:s.prizeWonMsg?.color||"#fff",onChange:e=>i("prizeWonMsg","color",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Message Font Size","ultimate-spin-wheel"),value:s.prizeWonMsg?.fontSize||"28px",onChange:e=>i("prizeWonMsg","fontSize",e)})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Lost Panel"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Title Text","ultimate-spin-wheel"),value:s.prizeLostTitle?.text||"Better luck next time!",onChange:e=>i("prizeLostTitle","text",e),help:(0,r.__)("Message shown when user loses.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose lost message color",value:s.prizeLostTitle?.color||"#fff",onChange:e=>i("prizeLostTitle","color",e.target.value)})),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Font Size","ultimate-spin-wheel"),value:s.prizeLostTitle?.fontSize||"24px",onChange:e=>i("prizeLostTitle","fontSize",e)})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Action Button"),initialOpen:!1,className:"flex gap-4 flex-col"},(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Win Button Text","ultimate-spin-wheel"),value:s.couponButton?.winText||"Start Shopping!",onChange:e=>i("couponButton","winText",e),help:(0,r.__)("Button text when user wins.","ultimate-spin-wheel")}),(0,a.createElement)(f.TextControl,{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-3 dark:bg-gray-700 dark:border-gray-600 placeholder-gray-700 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",label:(0,r.__)("Lost Button Text","ultimate-spin-wheel"),value:s.couponButton?.lostText||"Try Again",onChange:e=>i("couponButton","lostText",e),help:(0,r.__)("Button text when user loses.","ultimate-spin-wheel")}),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Text Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose coupon button text color",value:s.couponButton?.color||"#fff",onChange:e=>i("couponButton","color",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Background Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose coupon button background color",value:s.couponButton?.backgroundColor||"#16a085",onChange:e=>i("couponButton","backgroundColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Hover Color","ultimate-spin-wheel")),(0,a.createElement)(_,{title:"Choose coupon button hover color",value:s.couponButton?.hoverColor||"#139cb2",onChange:e=>i("couponButton","hoverColor",e.target.value)})),(0,a.createElement)("div",{className:"flex items-center gap-8 justify-between"},(0,a.createElement)("label",{className:"block text-sm font-medium text-gray-900 dark:text-white w-32"},(0,r.__)("Border Radius","ultimate-spin-wheel")),(0,a.createElement)(f.RangeControl,{value:s.couponButton?.borderRadius||5,onChange:e=>i("couponButton","borderRadius",e),min:0,max:50,help:(0,r.__)("Button border radius in pixels","ultimate-spin-wheel")}))))),(0,a.createElement)("div",{className:"max-w-full flex-1"},(0,a.createElement)(x(),null,(0,a.createElement)(()=>(0,a.createElement)("div",{className:"preview-tabs text-center mb-10"},(0,a.createElement)("button",{className:"px-4 py-2 mr-2 rounded "+("wheel"===o?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>n("wheel")},(0,r.__)("Wheel View","ultimate-spin-wheel")),(0,a.createElement)("button",{className:"px-4 py-2 mr-2 rounded "+("submit"===o?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>n("submit")},(0,r.__)("Form Panel","ultimate-spin-wheel")),(0,a.createElement)("button",{className:"px-4 py-2 mr-2 rounded "+("prize"===o?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>n("prize")},(0,r.__)("Prize Panel","ultimate-spin-wheel")),(0,a.createElement)("button",{className:"px-4 py-2 rounded "+("lost"===o?"bg-blue-500 text-white":"bg-gray-200"),onClick:()=>n("lost")},(0,r.__)("Lost Panel","ultimate-spin-wheel"))),null),(0,a.createElement)(()=>(0,a.createElement)("div",{id:"ultimate-spin-wheel-preview",className:`spinWheel text-center ${"wheel"===o?"active":""} ${"prize"===o?"active":""} ${"lost"===o?"active":""}`},(0,a.createElement)("div",{className:"wheelWrap"},(0,a.createElement)("div",{className:"wheel","data-spin-circles":"6"},(()=>{const t=[],l=2*e.length,o=90-360/l,r=360/l/2;return e.forEach((e,n)=>{const i=2*n,c=2*n+1;t.push((0,a.createElement)("div",{key:`win-${n}`,className:"area","data-wheel-bg":e.color,"data-wheel-prize":"wins","data-coupon-code":e.code||"","data-wheel-message":e.label,style:{transform:`rotate(${360/l*i}deg) skewY(-${o}deg)`}},(0,a.createElement)("span",{style:{background:e.color,transform:`skewY(${o}deg) rotate(${r}deg)`}},e.label))),t.push((0,a.createElement)("div",{key:`lost-${n}`,className:"area","data-wheel-bg":e.lost?.color||s.wheel?.lostColor||"#ccc","data-wheel-prize":"lost","data-wheel-message":e.lost?.label||s.prizeLostTitle?.text||"Better luck next time!",style:{transform:`rotate(${360/l*c}deg) skewY(-${o}deg)`}},(0,a.createElement)("span",{style:{background:e.lost?.color||s.wheel?.lostColor||"#ccc",transform:`skewY(${o}deg) rotate(${r}deg)`}})))}),t})()),(0,a.createElement)("div",{className:"sc-form-wrap "+("submit"===o?"active":""),style:{opacity:"submit"===o?1:0}},(0,a.createElement)("div",{className:"title"},s.formTitle?.text||"Let's try luck!"),(0,a.createElement)("form",{className:"sc-spin-form"},(0,a.createElement)("input",{type:"text",name:"name",placeholder:s.formInputs?.namePlaceholder||"Enter your name"}),(0,a.createElement)("input",{type:"email",name:"email",placeholder:s.formInputs?.emailPlaceholder||"Enter your email",required:!0}),(0,a.createElement)("button",{type:"submit",className:"spin"},s.formSubmitButton?.text||"Spin the Wheel")),(0,a.createElement)("a",{className:"sc-small",href:s.privacyText?.url||"javascript:void(0);"},s.privacyText?.text||"Privacy & Policy")),(0,a.createElement)("div",{className:`msg ${"prize"===o?"active":""} ${"lost"===o?"active":""}`,style:{opacity:"prize"===o||"lost"===o?1:0}},(0,a.createElement)("div",{className:"title"},(0,a.createElement)("span",null,"prize"===o?s.prizeWonTitle?.text||"Congratulations!":s.prizeLostTitle?.text||"Oops!")),(0,a.createElement)("div",{className:"prizeMsg"},"prize"===o?(s.prizeWonMsg?.text||"You won a {{discount_label}} discount!").replace("{{discount_label}}","10%"):s.prizeLostTitle?.text||"Better luck next time!"),(0,a.createElement)("div",{className:`sc-btn sc-coupon ${"prize"===o?"active":""} ${"lost"===o?"active":""}`},"prize"===o?s.couponButton?.winText||"Start shopping!":s.couponButton?.lostText||"Try Again"),(0,a.createElement)("a",{className:"sc-small",href:s.privacyText?.url||"javascript:void(0);"},s.privacyText?.text||"Privacy & Policy")),(0,a.createElement)("div",{className:`start ${"wheel"===o?"active":""} ${"prize"===o?"active":""} ${"lost"===o?"active":""}`,"data-wheel-lost-text":"Go again?"},"wheel"===o?s.spinButton?.text||"GO!":"lost"===o?"Go again?":s.spinButton?.text||"GO!"),(0,a.createElement)("div",{className:"marker"}))),null)))))};var E=l(425);l(982);const w=[{label:"Front Page",value:"front_page"},{label:"Blog Page",value:"blog_page"},{label:"Archive Page",value:"archive_page"},{label:"404 Page",value:"404_page"}],C=[{label:"All Users",value:"all_users"},{label:"Logged In",value:"logged_in"},{label:"Logged Out",value:"logged_out"},{label:"Administrator",value:"administrator"},{label:"Editor",value:"editor"},{label:"Author",value:"author"},{label:"Contributor",value:"contributor"},{label:"Subscriber",value:"subscriber"}],k=[{label:"Spin Wheel",value:"spin_wheel"},{label:"Popup",value:"popup"},{label:"Campaign Banner",value:"campaign_banner"}],N=[{label:"None",value:"none"},{label:"Instant",value:"instant"},{label:"Delayed",value:"delayed"},{label:"On Scroll",value:"scrolled"},{label:"Exit",value:"exit"}],S=[{label:"Fade In",value:"fadeIn"},{label:"Zoom In",value:"zoomIn"},{label:"Zoom Out",value:"zoomOut"},{label:"Slide In Top",value:"slideInTop"},{label:"Slide In Bottom",value:"slideInBottom"},{label:"Slide In Right",value:"slideInRight"},{label:"Slide In Left",value:"slideInLeft"},{label:"Slide Top",value:"slideTop"},{label:"Slide Right",value:"slideRight"},{label:"Slide Bottom",value:"slideBottom"},{label:"Slide Left",value:"slideLeft"},{label:"Rotate In",value:"rotateIn"},{label:"Rotate Out",value:"rotateOut"},{label:"Flip In X",value:"flipInX"},{label:"Flip In Y",value:"flipInY"},{label:"Swing Top",value:"swingTop"},{label:"Swing Right",value:"swingRight"},{label:"Swing Bottom",value:"swingBottom"},{label:"Swing Left",value:"swingLeft"},{label:"Flash",value:"flash"},{label:"Pulse",value:"pulse"},{label:"Rubber Band",value:"rubberBand"},{label:"Shake",value:"shake"},{label:"Swing",value:"swing"},{label:"Tada",value:"tada"},{label:"Wobble",value:"wobble"},{label:"Bounce",value:"bounce"},{label:"Bounce In",value:"bounceIn"},{label:"Bounce In Up",value:"bounceInUp"},{label:"Bounce In Down",value:"bounceInDown"},{label:"Bounce In Right",value:"bounceInRight"},{label:"Bounce In Left",value:"bounceInLeft"},{label:"Un Fold",value:"unFold"},{label:"Flow In",value:"flowIn"}],T=[{label:"Top Left",value:"topLeft"},{label:"Top Center",value:"topCenter"},{label:"Top Right",value:"topRight"},{label:"Bottom Left",value:"bottomLeft"},{label:"Bottom Center",value:"bottomCenter"},{label:"Bottom Right",value:"bottomRight"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Center",value:"center"}],P=[{label:"Same Window (_self)",value:"_self"},{label:"New Window (_blank)",value:"_blank"}],B=[{label:"Overlay",value:"overlay"},{label:"Button",value:"button"},{label:"Close",value:"close"}],D=async e=>{if(!e)return[];try{return(await wp.apiFetch({path:`/wp/v2/pages?search=${encodeURIComponent(e)}&per_page=10`})).map(e=>({label:e.title.rendered,value:String(e.id)}))}catch(e){return console.error("Error fetching pages:",e),[]}},O=({builderType:e,setBuilderType:t,builderStatus:l,setBuilderStatus:o,displayOn:n,setDisplayOn:s,notDisplayOn:i,setNotDisplayOn:c,displaySpecialPages:p,setDisplaySpecialPages:u,notDisplaySpecialPages:m,setNotDisplaySpecialPages:d,displayCustomPages:g,setDisplayCustomPages:b,notDisplayCustomPages:h,setNotDisplayCustomPages:y,displayUserRoles:x,setDisplayUserRoles:_,startDate:v,setStartDate:O,endDate:z,setEndDate:R,maxImpressions:I,setMaxImpressions:$,popupSettings:L,setPopupSettings:W})=>{var A,F,M;const[j,U]=(0,a.useState)("");(0,a.useEffect)(()=>{L&&Object.keys(L).length>0&&U(JSON.stringify(L))},[L]);const[H,J]=(0,a.useState)(new Map),[Y,G]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{const e=[...g,...h].filter(e=>!H.has(e));if(0!==e.length){G(!0);try{const t=10,l=new Map(H);for(let a=0;a<e.length;a+=t){const o=e.slice(a,a+t),r=o.join(",");try{(await wp.apiFetch({path:`/wp/v2/pages?include=${r}&per_page=${t}`})).forEach(e=>{l.set(String(e.id),e.title.rendered)})}catch(e){console.error("Error fetching page titles for batch:",o,e),o.forEach(e=>{l.has(e)||l.set(e,`Page ID: ${e}`)})}}J(l)}catch(e){console.error("Error fetching page titles:",e)}finally{G(!1)}}})()},[g,h]);const V=e=>H.get(e)||`Page ID: ${e}`,q=e=>{const t=[{label:"Entire Site",value:"entire_site"},{label:"All Pages",value:"all_pages"},{label:"All Posts",value:"all_posts"},{label:"Special Pages",value:"special_pages"},{label:"Custom Pages",value:"custom_pages"}];return e.map(e=>{const l=t.find(t=>t.value===e);return l?l.label:e})},X=e=>e.map(e=>{const t=w.find(t=>t.value===e);return t?t.label:e}),Z=e=>e.map(e=>V(e)),K=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not set";return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},(0,a.createElement)("h3",{className:"text-lg font-medium text-blue-900 mb-3"},(0,r.__)("Campaign Configuration Summary")),(0,a.createElement)("div",{className:"space-y-2 text-sm"},(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Layout:")," ",(0,a.createElement)("span",{className:"text-gray-900"},e?(e=>{const t=k.find(t=>t.value===e);return t?t.label:e})(e):"Not set")),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Status:")," ",(0,a.createElement)("span",{className:"capitalize "+("enabled"===l?"text-green-600":"text-red-600")},l)),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Schedule:")," ",(0,a.createElement)("span",{className:"text-gray-900"},v?K(v):"No start date"," - ",z?K(z):"No end date")),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Max Impressions:")," ",(0,a.createElement)("span",{className:"text-gray-900"},I>0?I:"Unlimited")),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Triggers:")," ",(0,a.createElement)("span",{className:"text-gray-900"},null!==(A=L?.popupType)&&void 0!==A?A:"Not set")),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Popup Settings:")," ",(0,a.createElement)("span",{className:"text-gray-900 text-xs break-all"},j||"Not configured")),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Display On:")," ",(0,a.createElement)("span",{className:"text-gray-900"},n.length?q(n).join(", "):"None selected")),n.includes("special_pages")&&p.length>0&&(0,a.createElement)("div",{className:"ml-4"},(0,a.createElement)("span",{className:"font-medium text-gray-600"},"â€¢ Special Pages:")," ",(0,a.createElement)("span",{className:"text-gray-800"},X(p).join(", "))),n.includes("custom_pages")&&g.length>0&&(0,a.createElement)("div",{className:"ml-4"},(0,a.createElement)("span",{className:"font-medium text-gray-600"},"â€¢ Custom Pages:")," ",(0,a.createElement)("span",{className:"text-gray-800"},Y?`Loading ${g.length} page title(s)...`:Z(g).join(", "))),i.length>0&&(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"Not Display On:")," ",(0,a.createElement)("span",{className:"text-gray-900"},q(i).join(", "))),i.includes("special_pages")&&m.length>0&&(0,a.createElement)("div",{className:"ml-4"},(0,a.createElement)("span",{className:"font-medium text-gray-600"},"â€¢ Special Pages:")," ",(0,a.createElement)("span",{className:"text-gray-800"},X(m).join(", "))),i.includes("custom_pages")&&h.length>0&&(0,a.createElement)("div",{className:"ml-4"},(0,a.createElement)("span",{className:"font-medium text-gray-600"},"â€¢ Custom Pages:")," ",(0,a.createElement)("span",{className:"text-gray-800"},Y?`Loading ${h.length} page title(s)...`:Z(h).join(", "))),(0,a.createElement)("div",null,(0,a.createElement)("span",{className:"font-medium text-gray-700"},"User Roles:")," ",(0,a.createElement)("span",{className:"text-gray-900"},x.length?(Q=x,Q.map(e=>{const t=C.find(t=>t.value===e);return t?t.label:e})).join(", "):"All users")))),(0,a.createElement)("div",{className:"plugin-sidebar-settings p-4 border-t border-gray-200 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Layout & Status"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Select Addons Type"),value:e,options:k,onChange:t,disabled:!0}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Status"),value:l,options:[{label:"Enabled",value:"enabled"},{label:"Disabled",value:"disabled"}],onChange:o})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Campaign Schedule"),initialOpen:!1},(0,a.createElement)("div",{style:{marginBottom:"20px"}},(0,a.createElement)("label",{className:"components-base-control__label"},(0,r.__)("Start Date & Time")),(0,a.createElement)(f.DateTimePicker,{currentDate:v||new Date,onChange:O,is12Hour:!0})),(0,a.createElement)("div",{style:{marginBottom:"20px"}},(0,a.createElement)("label",{className:"components-base-control__label"},(0,r.__)("End Date & Time")),(0,a.createElement)(f.DateTimePicker,{currentDate:z||new Date(Date.now()+2592e6),onChange:R,is12Hour:!0}))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Maximum Impressions"),initialOpen:!1},(0,a.createElement)(f.RangeControl,{label:(0,r.__)("Maximum Impressions (0 = unlimited)"),value:I,onChange:$,min:0,max:1e4,help:(0,r.__)("Limit total number of times this campaign can be shown"),disabled:!0})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Display On"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{multiple:!0,label:(0,r.__)("Select Display Option"),value:n,options:[{label:"Entire Site",value:"entire_site"},{label:"All Pages",value:"all_pages"},{label:"All Posts",value:"all_posts"},{label:"Special Pages",value:"special_pages"},{label:"Custom Pages",value:"custom_pages"}],onChange:s}),n.includes("special_pages")&&(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Select Special Pages"),multiple:!0,options:w,value:p,onChange:u}),n.includes("custom_pages")&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Select Custom Pages"),(0,a.createElement)(E.A,{label:(0,r.__)("Select Custom Pages"),isMulti:!0,cacheOptions:!0,defaultOptions:!0,loadOptions:D,value:g.map(e=>({value:e,label:V(e)})),onChange:e=>{const t=(e||[]).map(e=>e.value);b(t);const l=new Map(H);(e||[]).forEach(e=>{l.set(e.value,e.label)}),J(l)},placeholder:"Search and select pages to display...",isLoading:Y}))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Not Display On"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{multiple:!0,label:(0,r.__)("Select Exclusion Option"),value:i,options:[{label:"Entire Site",value:"entire_site"},{label:"All Pages",value:"all_pages"},{label:"All Posts",value:"all_posts"},{label:"Special Pages",value:"special_pages"},{label:"Custom Pages",value:"custom_pages"}],onChange:c}),i.includes("special_pages")&&(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Select Special Pages to Exclude"),multiple:!0,options:w,value:m,onChange:d}),i.includes("custom_pages")&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Select Custom Pages to Exclude"),(0,a.createElement)(E.A,{isMulti:!0,cacheOptions:!0,defaultOptions:!0,loadOptions:D,value:h.map(e=>({value:e,label:V(e)})),onChange:e=>{const t=(e||[]).map(e=>e.value);y(t);const l=new Map(H);(e||[]).forEach(e=>{l.set(e.value,e.label)}),J(l)},placeholder:"Search and select pages to exclude...",isLoading:Y}))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("User Roles"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{multiple:!0,label:(0,r.__)("Select User Roles"),options:C,value:x,onChange:_}))),(0,a.createElement)("hr",{className:"my-6"}),(0,a.createElement)("div",{className:"plugin-sidebar-settings p-4 border-t border-gray-200 grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Popup Type"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Popup Type"),value:L?.popupType,options:N,onChange:e=>W({...L,popupType:e}),help:(0,r.__)("Choose when the campaign should appear")}),L?.popupType?.includes("scrolled")&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(f.TextControl,{label:(0,r.__)("Scroll Distance"),value:L?.popup_scrollDistance||"400px",onChange:e=>W({...L,popup_scrollDistance:e}),help:(0,r.__)('Sets the popup scroll distance when popup_type: "scrolled" is used.')}),(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Hide on Scroll Up"),checked:L?.popup_scrollHideOnUp||!1,onChange:e=>W({...L,popup_scrollHideOnUp:e}),help:(0,r.__)('Defines if popup should stay hidden when visitors scroll back up upon using popup_type: "scrolled".')})),L?.popupType?.includes("delayed")&&(0,a.createElement)(f.TextControl,{label:(0,r.__)("Delayed Time"),value:L?.popup_delayedTime||"1s",onChange:e=>W({...L,popup_delayedTime:e}),help:(0,r.__)('Sets the popup delayed time in seconds when popup_type: "delayed" is used.')}),L?.popupType?.includes("exit")&&(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Show Always on Exit"),checked:L?.popup_exitShowAlways||!1,onChange:e=>W({...L,popup_exitShowAlways:e}),help:(0,r.__)('Defines if exit popup should appear always when using popup_type: "exit".')}),(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Auto Close"),checked:L?.popup_autoClose||!1,onChange:e=>W({...L,popup_autoClose:e}),help:(0,r.__)("Sets the popup auto close after it has been opened.")}),L?.popup_autoClose&&(0,a.createElement)(f.TextControl,{label:(0,r.__)("Auto Close After"),value:L?.popup_autoCloseAfter||"5s",onChange:e=>W({...L,popup_autoCloseAfter:e}),help:(0,r.__)("Defines the time in seconds when the popup will auto close upon opening.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Open With Hash"),value:L?.popup_openWithHash||"",onChange:e=>W({...L,popup_openWithHash:e}),placeholder:"#openMyPopup",help:(0,r.__)("Enables opening the popup via URL hash. If empty it will disable this option.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Reopen Class"),value:L?.popup_reopenClass||"open-popup",onChange:e=>W({...L,popup_reopenClass:e}),help:(0,r.__)("CSS class name that can be used to reopen the popup after it has been closed.")}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Reopen Class Trigger"),value:L?.popup_reopenClassTrigger||"click",options:[{label:"Click",value:"click"},{label:"Hover",value:"hover"}],onChange:e=>W({...L,popup_reopenClassTrigger:e}),help:(0,r.__)("How the reopen class should be triggered - either on click or hover.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Popup Position"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Popup Position"),value:L?.popup_position||"center",options:T,onChange:e=>W({...L,popup_position:e}),help:(0,r.__)("Defines the popup position on desktop devices.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Popup Animation"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Popup Animation"),value:L?.popup_animation||"fadeIn",options:S,onChange:e=>W({...L,popup_animation:e}),help:(0,r.__)("Defines the popup animation upon opening. Closing animation will apply automatically for most of the animations.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Popup Styling"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Close Button Style"),value:L?.popup_closeButtonStyle||"text label",options:[{label:"Text Label",value:"text label"},{label:"Icon Only",value:"icon"},{label:"None",value:"none"}],onChange:e=>W({...L,popup_closeButtonStyle:e}),help:(0,r.__)("Choose the style for the popup close button.")}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Close Button Align"),value:L?.popup_closeButtonAlign||"right",options:[{label:"Left",value:"left"},{label:"Right",value:"right"}],onChange:e=>W({...L,popup_closeButtonAlign:e}),help:(0,r.__)("Choose the alignment for the popup close button.")}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Close Button Place"),value:L?.popup_closeButtonPlace||"outside",options:[{label:"Inside",value:"inside"},{label:"Outside",value:"outside"}],onChange:e=>W({...L,popup_closeButtonPlace:e}),help:(0,r.__)("Choose whether the close button appears inside or outside the popup.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Close Button Text"),value:L?.popup_closeButtonText||"Close",onChange:e=>W({...L,popup_closeButtonText:e}),help:(0,r.__)("Text to display on the close button.")}),(0,a.createElement)("div",{className:"mt-4"},(0,a.createElement)("h4",{className:"text-sm font-medium mb-2"},"Popup CSS"),(0,a.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,a.createElement)(f.TextControl,{label:(0,r.__)("Width"),value:L?.popup_css?.width||"400px",onChange:e=>W({...L,popup_css:{...L.popup_css,width:e}}),help:(0,r.__)("Width of the popup.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Height"),value:L?.popup_css?.height||"auto",onChange:e=>W({...L,popup_css:{...L.popup_css,height:e}}),help:(0,r.__)("Height of the popup.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Background"),value:L?.popup_css?.background||"transparent",onChange:e=>W({...L,popup_css:{...L.popup_css,background:e}}),help:(0,r.__)("Background color or image of the popup.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Padding"),value:L?.popup_css?.padding||"0",onChange:e=>W({...L,popup_css:{...L.popup_css,padding:e}}),help:(0,r.__)("Padding inside the popup.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Margin"),value:L?.popup_css?.margin||"30px",onChange:e=>W({...L,popup_css:{...L.popup_css,margin:e}}),help:(0,r.__)("Margin around the popup.")})))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Content Animation"),initialOpen:!1},(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Enable Content Animation"),checked:null!==(F=L?.content_animate)&&void 0!==F&&F,onChange:e=>W({...L,content_animate:e}),help:(0,r.__)("Defines if inner content should be animated upon opening the popup.")}),L?.content_animate&&(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Content Animation Type"),value:L?.content_animation||"slideRight",options:S,onChange:e=>W({...L,content_animation:e}),help:(0,r.__)("Defines the inner content animation upon popup opening.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Overlay Settings"),initialOpen:!1},(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Show Overlay"),checked:null===(M=L?.overlay_isVisible)||void 0===M||M,onChange:e=>W({...L,overlay_isVisible:e}),help:(0,r.__)("Enable or disable the overlay background behind the popup.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Mobile Position"),initialOpen:!1},(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Mobile Popup Position"),value:L?.mobile_position||"center",options:T,onChange:e=>W({...L,mobile_position:e}),help:(0,r.__)("Defines the popup position on mobile / smaller screen devices.")})),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Mobile Settings"),initialOpen:!1},(0,a.createElement)(f.TextControl,{label:(0,r.__)("Mobile Breakpoint"),value:L?.mobile_breakpoint||"540px",onChange:e=>W({...L,mobile_breakpoint:e}),help:(0,r.__)("Screen width below which mobile settings will be applied.")}),(0,a.createElement)("div",{className:"mt-4"},(0,a.createElement)("h4",{className:"text-sm font-medium mb-2"},"Mobile CSS"),(0,a.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,a.createElement)(f.TextControl,{label:(0,r.__)("Width"),value:L?.mobile_css?.width||"400px",onChange:e=>W({...L,mobile_css:{...L.mobile_css,width:e}}),help:(0,r.__)("Width of the popup on mobile devices.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Height"),value:L?.mobile_css?.height||"400px",onChange:e=>W({...L,mobile_css:{...L.mobile_css,height:e}}),help:(0,r.__)("Height of the popup on mobile devices.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Background"),value:L?.mobile_css?.background||"transparent",onChange:e=>W({...L,mobile_css:{...L.mobile_css,background:e}}),help:(0,r.__)("Background of the popup on mobile devices.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Padding"),value:L?.mobile_css?.padding||"0",onChange:e=>W({...L,mobile_css:{...L.mobile_css,padding:e}}),help:(0,r.__)("Padding inside the popup on mobile devices.")}),(0,a.createElement)(f.TextControl,{label:(0,r.__)("Margin"),value:L?.mobile_css?.margin||"20px",onChange:e=>W({...L,mobile_css:{...L.mobile_css,margin:e}}),help:(0,r.__)("Margin around the popup on mobile devices.")})))),(0,a.createElement)(f.PanelBody,{title:(0,r.__)("Redirect on Close"),initialOpen:!1},(0,a.createElement)(f.ToggleControl,{label:(0,r.__)("Enable Redirect on Close"),checked:L?.popup_redirectOnClose||!1,onChange:e=>W({...L,popup_redirectOnClose:e}),help:(0,r.__)("Defines if visitor gets redirected to another URL after popup gets closed.")}),L?.popup_redirectOnClose&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(f.TextControl,{label:(0,r.__)("Redirect URL"),value:L?.popup_redirectOnCloseUrl||"",onChange:e=>W({...L,popup_redirectOnCloseUrl:e}),placeholder:"https://example.com",help:(0,r.__)("Redirect URL after popup gets closed.")}),(0,a.createElement)(f.SelectControl,{label:(0,r.__)("Redirect Target"),value:L?.popup_redirectOnCloseTarget||"_blank",options:P,onChange:e=>W({...L,popup_redirectOnCloseTarget:e}),help:(0,r.__)("Sets the target of the redirection when using redirect on close feature.")}),(0,a.createElement)(f.SelectControl,{multiple:!0,label:(0,r.__)("Redirect Triggers"),value:L?.popup_redirectOnCloseTriggers?L.popup_redirectOnCloseTriggers.split(" "):[],options:B,onChange:e=>W({...L,popup_redirectOnCloseTriggers:e.join(" ")}),help:(0,r.__)("Defines which elements should trigger the redirection upon closing the popup.")})))));var Q},z={builderType:"uspw_type",builderStatus:"uspw_status",displayOn:"uspw_display_on",notDisplayOn:"uspw_not_display_on",displaySpecialPages:"uspw_display_special_pages",notDisplaySpecialPages:"uspw_not_display_special_pages",displayCustomPages:"uspw_display_custom_pages",notDisplayCustomPages:"uspw_not_display_custom_pages",userRoles:"uspw_display_roles",coupons:"uspw_coupons",colors:"ultimate_spin_wheel_colors",startDate:"uspw_start_date",endDate:"uspw_end_date",popupType:"uspw_campaign_triggers",popupSettings:"uspw_popup_settings"},R={builderType:"spin_wheel",builderStatus:"enabled",displayOn:["entire_site"],notDisplayOn:[],displaySpecialPages:[],notDisplaySpecialPages:[],displayCustomPages:[],notDisplayCustomPages:[],displayUserRoles:["all_users"],coupons:[{label:"5$",code:"5xOFF",color:"#16a085",lost:{label:"",color:"#277162"}},{label:"10$",code:"10xOFF",color:"#333333",lost:{label:"",color:"#16a085"}},{label:"15$",code:"15xOFF",color:"#277162",lost:{label:"",color:"#333333"}},{label:"20$",code:"20xOFF",color:"#16a085",lost:{label:"",color:"#277162"}},{label:"25$",code:"25xOFF",color:"#333333",lost:{label:"",color:"#16a085"}},{label:"30$",code:"30xOFF",color:"#277162",lost:{label:"",color:"#333333"}}],colors:[],popupType:["instant"],startDate:new Date(Date.now()-864e5),endDate:new Date(Date.now()+2592e6),maxImpressions:0,customDesign:{spinButton:{text:"GO!",backgroundColor:"#16a085",backgroundColorColorHover:"#139cb2"},viewPanel:{backgroundColor:"#16a085"},formTitle:{text:"Let's try luck!",fontSize:"24px",color:"#fff"},formSubmitButton:{text:"Spin The Wheel",color:"#0a0a0a",backgroundColor:"#fff"},couponButton:{color:"#fff",hoverColor:"#139cb2"},prizeWonTitle:{text:"Congratulations!",fontSize:"24px",color:"#fff"},prizeWonMsg:{text:"You won a {{discount_label}} discount!",fontSize:"28px",color:"#fff"},prizeLostTtitle:{text:"Better luck next time!",fontSize:"24px",color:"#fff"},privacyText:{text:"Privacy & Policy",color:"#fff",fontSize:"12px"}},popupSettings:{popupType:"instant",popup_delayedTime:"1s",popup_scrollDistance:"400px",popup_scrollHideOnUp:!1,popup_position:"bottomRight",popup_closeButtonStyle:"text label",popup_reopenClass:"open-popup",popup_reopenClassTrigger:"click",popup_closeButtonPlace:"outside",popup_closeButtonAlign:"right",popup_openWithHash:"#open-popup",popup_redirectOnClose:!1,popup_redirectOnCloseUrl:"",popup_redirectOnCloseTarget:"",popup_css:{width:"400px",height:"400px",background:"transparent",padding:"0",margin:"30px"},page_animate:!0,page_animation:"blur",page_blurRadius:"2px",overlay_isVisible:!1,content_animate:!0,content_animation:"slideRight",mobile_breakpoint:"540px",mobile_css:{width:"400px",height:"400px",background:"transparent",padding:"0",margin:"20px"}}},I=()=>{const[e,t]=(0,a.useState)(localStorage.getItem("ultimate_spin_wheel_spinwheel_active_tab")||"coupons"),[l,o]=(0,a.useState)(!0),[r,i]=(0,a.useState)(!1),[c,p]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[d,g]=(0,a.useState)({coupons:R.coupons,colors:R.colors}),[b,f]=(0,a.useState)(R.builderType),[y,x]=(0,a.useState)(R.builderStatus),[_,E]=(0,a.useState)(R.displayOn),[w,C]=(0,a.useState)(R.notDisplayOn),[k,N]=(0,a.useState)(R.displaySpecialPages),[S,T]=(0,a.useState)(R.notDisplaySpecialPages),[P,B]=(0,a.useState)(R.displayCustomPages),[D,I]=(0,a.useState)(R.notDisplayCustomPages),[$,L]=(0,a.useState)(R.displayUserRoles),[W,A]=(0,a.useState)(R.startDate),[F,M]=(0,a.useState)(R.endDate),[j,U]=(0,a.useState)(R.maxImpressions),[H,J]=(0,a.useState)(R.customDesign),[Y,G]=(0,a.useState)(R.popupSettings),{post:V,hasResolved:q}=(0,n.useSelect)(e=>c?{post:e("core").getEntityRecord("postType","wowdevs_engage",c),hasResolved:e("core").hasFinishedResolution("getEntityRecord",["postType","wowdevs_engage",c])}:{post:null,hasResolved:!1},[c]),{saveEntityRecord:X}=(0,n.useDispatch)("core"),Z=(e,t=[])=>{if(!e)return t;try{const l=JSON.parse(e);return Array.isArray(l)?l:t}catch(e){return console.error("Error parsing JSON:",e),t}},K=(e,t=[])=>{if(!e)return t;try{const l=JSON.parse(e);if(Array.isArray(l)){const e=l.map(e=>"object"==typeof e&&void 0!==e.value?e.value:e);return e.length>0?e:t}return t}catch(l){return console.error("Error deserializing meta value:",e,l),t}},Q=(e,t)=>null!=e&&""!==e?e:t;(0,a.useEffect)(()=>{const e=new URLSearchParams(window.location.search),t=e.get("post_id")||e.get("id");if(t){const e=parseInt(t,10);isNaN(e)?(m("Invalid post ID in URL parameters"),o(!1)):(p(e),console.log("Post ID from URL:",e))}else m("No post ID found in URL parameters"),o(!1)},[]),(0,a.useEffect)(()=>{c&&q&&(o(!1),V&&V.meta?(console.log("Loaded post data:",V),ee(V.meta),m(null)):V||(m("Post not found. You may need to create the post first."),console.error("Post not found for ID:",c)))},[V,q,c]);const ee=e=>{console.log("Updating states from meta:",e),g({coupons:Z(e[z.coupons],R.coupons),colors:Z(e[z.colors],R.colors)}),f(Q(e[z.builderType],R.builderType)),x(Q(e[z.builderStatus],R.builderStatus)),E(K(e[z.displayOn],R.displayOn)),C(K(e[z.notDisplayOn],R.notDisplayOn)),N(K(e[z.displaySpecialPages],R.displaySpecialPages)),T(K(e[z.notDisplaySpecialPages],R.notDisplaySpecialPages)),B(K(e[z.displayCustomPages],R.displayCustomPages)),I(K(e[z.notDisplayCustomPages],R.notDisplayCustomPages)),L(K(e[z.userRoles],R.displayUserRoles)),A(Q(e[z.startDate],R.startDate)),M(Q(e[z.endDate],R.endDate)),U(void 0!==e[z.maxImpressions]?parseInt(e[z.maxImpressions],10):R.maxImpressions),G(((e,t={})=>{if(!e)return t;try{const l=JSON.parse(e);return"object"!=typeof l||null===l||Array.isArray(l)?t:l}catch(e){return console.error("Error parsing JSON object:",e),t}})(e[z.popupSettings],R.popupSettings))},te=e=>{g(t=>({...t,coupons:e}))};if(l)return(0,a.createElement)("div",{className:"mt-6 pt-6"},(0,a.createElement)("div",{className:"flex justify-center items-center h-64"},(0,a.createElement)("div",{className:"text-lg"},"Loading configuration...")));if(u)return(0,a.createElement)("div",{className:"mt-6 pt-6"},(0,a.createElement)("div",{className:"flex justify-center items-center h-64"},(0,a.createElement)("div",{className:"text-center"},(0,a.createElement)("div",{className:"text-lg text-red-600 mb-4"},u),(0,a.createElement)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>{let e=new URL(window.location.href);e.hash="campaigns",window.location=e.toString(),window.location.reload()}},"Select First"))));const le=e=>{t(e),localStorage.setItem("ultimate_spin_wheel_spinwheel_active_tab",e)};return(0,a.createElement)("div",{className:"mt-6 pt-6"},(0,a.createElement)("div",{className:"mb-12 relative flex flex-col bg-clip-border rounded-xl bg-white dark:bg-gray-900 text-gray-700 shadow-sm"},(0,a.createElement)(s.A,{title:"Spin Wheel Generator",desc:"Create and customize your spin wheel with coupon-based rewards and live preview. "+(c?`(ID# ${c})`:"")}),(0,a.createElement)("div",{className:"tabs flex space-x-4 border-b border-gray-200 dark:border-gray-700 mb-4"},(0,a.createElement)("button",{className:"tab-button px-4 py-2 text-sm font-medium "+("coupons"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),onClick:()=>le("coupons")},"Coupons"),(0,a.createElement)("button",{className:"tab-button px-4 py-2 text-sm font-medium "+("settings"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),onClick:()=>le("settings")},"Configuration"),(0,a.createElement)("button",{className:"tab-button px-4 py-2 text-sm font-medium "+("preview"===e?"text-blue-600 border-b-2 border-blue-600":"text-blue-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),onClick:()=>le("preview")},"Preview")),(0,a.createElement)("div",{className:"p-3 md:p-6"},(()=>{switch(e){case"coupons":return(0,a.createElement)(h,{coupons:d.coupons,onAdd:()=>te([...d.coupons,{label:"New Coupon",code:"NEW",color:"#000000"}]),onRemove:e=>te(d.coupons.filter((t,l)=>l!==e)),onUpdate:(e,t)=>{const l=[...d.coupons];l[e]=t,te(l)}});case"settings":return(0,a.createElement)(O,{builderType:b,setBuilderType:f,builderStatus:y,setBuilderStatus:x,displayOn:_,setDisplayOn:E,notDisplayOn:w,setNotDisplayOn:C,displaySpecialPages:k,setDisplaySpecialPages:N,notDisplaySpecialPages:S,setNotDisplaySpecialPages:T,displayCustomPages:P,setDisplayCustomPages:B,notDisplayCustomPages:D,setNotDisplayCustomPages:I,displayUserRoles:$,setDisplayUserRoles:L,startDate:W,setStartDate:A,endDate:F,setEndDate:M,maxImpressions:j,setMaxImpressions:U,popupSettings:Y,setPopupSettings:G});case"preview":return(0,a.createElement)(v,{segments:d.coupons,colors:d.colors,customDesign:H,setCustomDesign:J});default:return null}})()),(0,a.createElement)("div",{className:"p-4 border-t border-gray-200"},(0,a.createElement)("button",{className:"px-6 py-3 text-white rounded-lg font-medium transition-colors "+(r?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),onClick:async()=>{if(c){i(!0),m(null);try{if(!1===(0,n.select)("core").canUser("update","posts",c))throw new Error("Permission denied: You do not have permission to update this post.");const e={[z.builderType]:String(b||R.builderType),[z.builderStatus]:String(y||R.builderStatus),[z.maxImpressions]:parseInt(j,10)||R.maxImpressions,[z.startDate]:W?W instanceof Date?W.toISOString():W:null,[z.endDate]:F?F instanceof Date?F.toISOString():F:null,[z.coupons]:JSON.stringify(d.coupons||R.coupons),[z.colors]:JSON.stringify(d.colors||R.colors),[z.displayOn]:JSON.stringify(_||R.displayOn),[z.notDisplayOn]:JSON.stringify(w||R.notDisplayOn),[z.displaySpecialPages]:JSON.stringify(k||R.displaySpecialPages),[z.notDisplaySpecialPages]:JSON.stringify(S||R.notDisplaySpecialPages),[z.displayCustomPages]:JSON.stringify(P||R.displayCustomPages),[z.notDisplayCustomPages]:JSON.stringify(D||R.notDisplayCustomPages),[z.userRoles]:JSON.stringify($||R.displayUserRoles),[z.popupSettings]:JSON.stringify(Y||R.popupSettings),[z.customDesign]:H||R.customDesign};console.log("Preparing to save configuration..."),console.log("Post ID:",c),console.log("Custom Design Data:",H),console.log("Wheel Config:",d),console.log("Complete Meta Data:",e),Object.keys(e).forEach(t=>{void 0===e[t]&&console.warn(`Warning: Meta key "${t}" is undefined`)});const{editEntityRecord:t,saveEditedEntityRecord:l}=(0,n.dispatch)("core");try{t("postType","wowdevs_engage",c,{meta:e}),console.log("Entity record edited, now saving...");const a=await l("postType","wowdevs_engage",c);if(console.log("Save result:",a),!1!==a)return console.log("Configuration saved successfully via editEntityRecord method"),void alert("Configuration saved successfully!");console.warn("editEntityRecord method returned false, trying alternative...")}catch(e){console.warn("editEntityRecord method failed:",e)}try{console.log("Trying direct saveEntityRecord...");const t=X("postType","wowdevs_engage",{id:c,meta:e}),l=new Promise((e,t)=>setTimeout(()=>t(new Error("Save operation timed out after 30 seconds")),3e4)),a=await Promise.race([t,l]);if(console.log("Direct save result:",a),a&&(a.id||!0===a))return console.log("Configuration saved successfully via direct saveEntityRecord"),void alert("Configuration saved successfully!");if(null==a)throw new Error("Save operation returned null/undefined - check WordPress permissions and post type registration")}catch(e){throw console.warn("Direct saveEntityRecord failed:",e),e}}catch(e){console.error("All save methods failed:",e);let t="Failed to save configuration";e.message.includes("timeout")?t+=": Operation timed out. Please try again.":e.message.includes("permission")?t+=": Permission denied. Check user capabilities.":e.message.includes("post type")?t+=": Post type not properly registered or accessible.":e.message&&(t+=`: ${e.message}`),m(t),alert(t),console.log("Debug info:",{postId:c,postExists:!!V,hasPermissions:(0,n.select)("core").canUser("update","posts",c),postType:V?.type,postStatus:V?.status})}finally{i(!1)}}else alert("Error: No post ID available. Cannot save configuration.")},disabled:r||!c},r?"Saving...":"Save Configuration"),!c&&(0,a.createElement)("p",{className:"text-red-600 text-sm mt-2"},"Error: No post ID available. Please check the URL parameters."),u&&(0,a.createElement)("p",{className:"text-red-600 text-sm mt-2"},u))))}}}]);